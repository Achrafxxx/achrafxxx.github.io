function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(o){r=!0,i=o}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return n}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,a=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"74Do":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("G5s2"),r=n("fXoL"),i=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"Order",e)}return n}(a.b);return e.\u0275fac=function(t){return new(t||e)(r.gc(a.c))},e.\u0275prov=r.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"8ikL":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("G5s2"),r=n("fXoL"),i=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"Company",e)}return n}(a.b);return e.\u0275fac=function(t){return new(t||e)(r.gc(a.c))},e.\u0275prov=r.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},G5s2:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce})),n.d(t,"b",(function(){return Je})),n.d(t,"c",(function(){return tt})),n.d(t,"d",(function(){return vt})),n.d(t,"e",(function(){return se})),n.d(t,"f",(function(){return ie}));var a=n("fXoL"),r=n("pLZG"),i=n("lJxs"),s=n("3E0/"),c=n("tS1D"),o=n("JIr8"),u=n("UXun"),l=n("IzEk"),h=n("5+tZ"),d=n("zp1y"),y=n("bOdf"),f=n("tk/3"),g=n("z6cu"),p=n("LRne"),v=n("Nv8m"),O=n("D0XW"),m=n("VRyK"),k=n("kt0X"),b=function(){var e={EntitiesOnly:0,Both:1,None:2};return e[e.EntitiesOnly]="EntitiesOnly",e[e.Both]="Both",e[e.None]="None",e}();function C(e){return function(t,n){var a={ids:_toConsumableArray(n.ids),entities:Object.assign({},n.entities)},r=e(t,a);return r===b.Both?Object.assign({},n,a):r===b.EntitiesOnly?Object.assign(Object.assign({},n),{entities:a.entities}):n}}function S(e,t){var n=t(e);return Object(a.Y)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),n}function j(e){function t(t,n){var a=S(t,e);return a in n.entities?b.None:(n.ids.push(a),n.entities[a]=t,b.Both)}function n(e,n){var a,r=!1,i=_createForOfIteratorHelper(e);try{for(i.s();!(a=i.n()).done;){r=t(a.value,n)!==b.None||r}}catch(s){i.e(s)}finally{i.f()}return r?b.Both:b.None}function a(e,t){return t.ids=[],t.entities={},n(e,t),b.Both}function r(e,t){var n=(e instanceof Array?e:t.ids.filter((function(n){return e(t.entities[n])}))).filter((function(e){return e in t.entities})).map((function(e){return delete t.entities[e]})).length>0;return n&&(t.ids=t.ids.filter((function(e){return e in t.entities}))),n?b.Both:b.None}function i(t,n){var a={};return(t=t.filter((function(e){return e.id in n.entities}))).length>0?t.filter((function(t){return function(t,n,a){var r=Object.assign({},a.entities[n.id],n.changes),i=S(r,e),s=i!==n.id;return s&&(t[n.id]=i,delete a.entities[n.id]),a.entities[i]=r,s}(a,t,n)})).length>0?(n.ids=n.ids.map((function(e){return a[e]||e})),b.Both):b.EntitiesOnly:b.None}function s(t,a){var r,s=[],c=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var u=r.value,l=S(u,e);l in a.entities?c.push({id:l,changes:u}):s.push(u)}}catch(y){o.e(y)}finally{o.f()}var h=i(c,a),d=n(s,a);switch(!0){case d===b.None&&h===b.None:return b.None;case d===b.Both||h===b.Both:return b.Both;default:return b.EntitiesOnly}}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:C(t),addMany:C(n),addAll:C(a),setAll:C(a),setOne:C((function(t,n){var a=S(t,e);return a in n.entities?(n.entities[a]=t,b.EntitiesOnly):(n.ids.push(a),n.entities[a]=t,b.Both)})),updateOne:C((function(e,t){return i([e],t)})),updateMany:C(i),upsertOne:C((function(e,t){return s([e],t)})),upsertMany:C(s),removeOne:C((function(e,t){return r([e],t)})),removeMany:C(r),map:C((function(e,t){return i(t.ids.reduce((function(n,a){var r=e(t.entities[a]);return r!==t.entities[a]&&n.push({id:a,changes:r}),n}),[]).filter((function(e){return e.id in t.entities})),t)}))}}var E,x=n("snw9"),A=((E=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"create",value:function(e,t,n,a){var r="string"==typeof e?Object.assign(Object.assign({},a||{}),{entityName:e,entityOp:t,data:n}):e;return this.createCore(r)}},{key:"createCore",value:function(e){var t=e.entityName,n=e.entityOp,a=e.tag;if(!t)throw new Error("Missing entity name for new action");if(null==n)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(n,a||t),payload:e}}},{key:"createFromAction",value:function(e,t){return this.create(Object.assign(Object.assign({},e.payload),t))}},{key:"formatActionType",value:function(e,t){return"[".concat(t,"] ").concat(e)}}]),e}()).\u0275fac=function(e){return new(e||E)},E.\u0275prov=a.Ob({token:E,factory:E.\u0275fac}),E),w=function(){function e(t,n){_classCallCheck(this,e),this.entityName=t,this.selectId=n}return _createClass(e,[{key:"mustBeEntity",value:function(e){var t=this.extractData(e);if(!t)return this.throwError(e,"should have a single entity.");var n=this.selectId(t);return this.isNotKeyType(n)&&this.throwError(e,"has a missing or invalid entity key (id)"),t}},{key:"mustBeEntities",value:function(e){var t=this,n=this.extractData(e);return Array.isArray(n)?(n.forEach((function(n,a){var r=t.selectId(n);t.isNotKeyType(r)&&t.throwError(e,", item ".concat(a+1,", does not have a valid entity key (id)"))})),n):this.throwError(e,"should be an array of entities")}},{key:"mustBeKey",value:function(e){var t=this.extractData(e);if(!t)throw new Error("should be a single entity key");if(this.isNotKeyType(t))throw new Error("is not a valid key (id)");return t}},{key:"mustBeKeys",value:function(e){var t=this,n=this.extractData(e);return Array.isArray(n)?(n.forEach((function(n,a){t.isNotKeyType(n)&&t.throwError(e,"".concat(t.entityName," ', item ").concat(a+1,", is not a valid entity key (id)"))})),n):this.throwError(e,"should be an array of entity keys (id)")}},{key:"mustBeUpdate",value:function(e){var t=this.extractData(e);if(!t)return this.throwError(e,"should be a single entity update");var n=t.id,a=t.changes,r=this.selectId(a);return(this.isNotKeyType(n)||this.isNotKeyType(r))&&this.throwError(e,"has a missing or invalid entity key (id)"),t}},{key:"mustBeUpdates",value:function(e){var t=this,n=this.extractData(e);return Array.isArray(n)?(n.forEach((function(n,a){var r=n.id,i=n.changes,s=t.selectId(i);(t.isNotKeyType(r)||t.isNotKeyType(s))&&t.throwError(e,", item ".concat(a+1,", has a missing or invalid entity key (id)"))})),n):this.throwError(e,"should be an array of entity updates")}},{key:"mustBeUpdateResponse",value:function(e){var t=this.extractData(e);if(!t)return this.throwError(e,"should be a single entity update");var n=t.id,a=t.changes,r=this.selectId(a);return(this.isNotKeyType(n)||this.isNotKeyType(r))&&this.throwError(e,"has a missing or invalid entity key (id)"),t}},{key:"mustBeUpdateResponses",value:function(e){var t=this,n=this.extractData(e);return Array.isArray(n)?(n.forEach((function(n,a){var r=n.id,i=n.changes,s=t.selectId(i);(t.isNotKeyType(r)||t.isNotKeyType(s))&&t.throwError(e,", item ".concat(a+1,", has a missing or invalid entity key (id)"))})),n):this.throwError(e,"should be an array of entity updates")}},{key:"extractData",value:function(e){return e.payload&&e.payload.data}},{key:"isNotKeyType",value:function(e){return"string"!=typeof e&&"number"!=typeof e}},{key:"throwError",value:function(e,t){throw new Error("".concat(this.entityName,' EntityAction guard for "').concat(e.type,'": payload ').concat(t))}}]),e}();function D(e){return null==e?void 0:e.id}function _(e){if(null==e)return[];if(Array.isArray(e[0])){var t=_toArray(e),n=t[0],a=t.slice(1);e=[].concat(_toConsumableArray(n),_toConsumableArray(a))}return e}function M(e){return e=e||D,function(t){var n=e(t);if(null==n)throw new Error("Primary key may not be null/undefined.");return t&&{id:n,changes:t}}}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=_(t);switch(a.length){case 0:return Object(r.a)((function(e){return e.payload&&null!=e.payload.entityOp}));case 1:var i=a[0];return Object(r.a)((function(e){return e.payload&&i===e.payload.entityOp}));default:return Object(r.a)((function(e){var t=e.payload&&e.payload.entityOp;return t&&a.some((function(e){return e===t}))}))}}function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=_(t);switch(a.length){case 0:return Object(r.a)((function(e){return e.payload&&null!=e.payload.entityName}));case 1:var i=a[0];return Object(r.a)((function(e){return e.payload&&i===e.payload.entityName}));default:return Object(r.a)((function(e){var t=e.payload&&e.payload.entityName;return!!t&&a.some((function(e){return e===t}))}))}}function U(e){var t=(e=e&&e.changes?e:{changes:[]}).changes.filter((function(e){return null!=e&&e.entities&&e.entities.length>0}));return Object.assign(Object.assign({},e),{changes:t})}var N=function(){var e={IgnoreChanges:0,PreserveChanges:1,OverwriteChanges:2};return e[e.IgnoreChanges]="IgnoreChanges",e[e.PreserveChanges]="PreserveChanges",e[e.OverwriteChanges]="OverwriteChanges",e}(),R=function e(t,n){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/clear-collections",this.payload={collections:t,tag:n}},$=function e(t,n){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/load-collections",this.payload={collections:t,tag:n}},F=function e(t,n,a){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/merge-query-set",this.payload={querySet:t,mergeStrategy:null===n?N.PreserveChanges:n,tag:a}},L=function e(t,n){_classCallCheck(this,e),this.cache=t,this.type="@ngrx/data/entity-cache/set-cache",this.payload={cache:t,tag:n}},B=function e(t,n,a){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/save-entities",a=a||{},t&&(t.tag=t.tag||a.tag),this.payload=Object.assign(Object.assign({changeSet:t,url:n},a),{tag:t.tag})},q=function e(t,n,a,r){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/save-entities-cancel",this.payload={correlationId:t,reason:n,entityNames:a,tag:r}},P=function e(t,n,a){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/save-entities-cancel",this.payload={correlationId:t,reason:n,tag:a}},K=function e(t,n){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/save-entities-error",this.payload={error:t,originalAction:n,correlationId:n.payload.correlationId}},H=function e(t,n,a){_classCallCheck(this,e),this.type="@ngrx/data/entity-cache/save-entities-success",a=a||{},t&&(t.tag=t.tag||a.tag),this.payload=Object.assign(Object.assign({changeSet:t,url:n},a),{tag:t.tag})};function Q(e){return e+"/success"}var G,V,W,z,X,J,Z,Y,ee,te=function e(t,n){_classCallCheck(this,e),this.error=t,this.requestData=n,this.message="string"==typeof t?t:function(e){var t=e.error,n=e.body,a=e.message,r=null;return t?r="string"==typeof t?t:t.message:a?r=a:n&&(r="string"==typeof n?n:n.error),"string"==typeof r?r:r?JSON.stringify(r):null}(t)},ne=function e(){_classCallCheck(this,e)},ae=function e(){_classCallCheck(this,e)},re=new a.r("@ngrx/data/plural-names"),ie=function e(){_classCallCheck(this,e)},se=function e(){_classCallCheck(this,e)},ce=((G=function(){function e(t){_classCallCheck(this,e),this.pluralizer=t,this.knownHttpResourceUrls={}}return _createClass(e,[{key:"getResourceUrls",value:function(e,t){var n=this.knownHttpResourceUrls[e];if(!n){var a=function(e){return e.replace(/^[\/\s]+|[\/\s]+$/g,"")}(t);n={entityResourceUrl:"".concat(a,"/").concat(e,"/").toLowerCase(),collectionResourceUrl:"".concat(a,"/").concat(this.pluralizer.pluralize(e),"/").toLowerCase()},this.registerHttpResourceUrls(_defineProperty({},e,n))}return n}},{key:"entityResource",value:function(e,t){return this.getResourceUrls(e,t).entityResourceUrl}},{key:"collectionResource",value:function(e,t){return this.getResourceUrls(e,t).collectionResourceUrl}},{key:"registerHttpResourceUrls",value:function(e){this.knownHttpResourceUrls=Object.assign(Object.assign({},this.knownHttpResourceUrls),e||{})}}]),e}()).\u0275fac=function(e){return new(e||G)(a.gc(ie))},G.\u0275prov=a.Ob({token:G,factory:G.\u0275fac}),G),oe=function(){function e(t,n,a,r){_classCallCheck(this,e),this.http=n,this.httpUrlGenerator=a,this.getDelay=0,this.saveDelay=0,this.timeout=0,this._name=t+" DefaultDataService",this.entityName=t;var i=r||{},s=i.root,c=void 0===s?"api":s,o=i.delete404OK,u=void 0===o||o,l=i.getDelay,h=void 0===l?0:l,d=i.saveDelay,y=void 0===d?0:d,f=i.timeout,g=void 0===f?0:f;this.delete404OK=u,this.entityUrl=a.entityResource(t,c),this.entitiesUrl=a.collectionResource(t,c),this.getDelay=h,this.saveDelay=y,this.timeout=g}return _createClass(e,[{key:"add",value:function(e){var t=e||new Error('No "'.concat(this.entityName,'" entity to add'));return this.execute("POST",this.entityUrl,t)}},{key:"delete",value:function(e){var t;return null==e&&(t=new Error('No "'.concat(this.entityName,'" key to delete'))),this.execute("DELETE",this.entityUrl+e,t).pipe(Object(i.a)((function(t){return e})))}},{key:"getAll",value:function(){return this.execute("GET",this.entitiesUrl)}},{key:"getById",value:function(e){var t;return null==e&&(t=new Error('No "'.concat(this.entityName,'" key to get'))),this.execute("GET",this.entityUrl+e,t)}},{key:"getWithQuery",value:function(e){var t=new f.e("string"==typeof e?{fromString:e}:{fromObject:e});return this.execute("GET",this.entitiesUrl,void 0,{params:t})}},{key:"update",value:function(e){var t=e&&e.id,n=null==t?new Error('No "'.concat(this.entityName,'" update data or id')):e.changes;return this.execute("PUT",this.entityUrl+t,n)}},{key:"upsert",value:function(e){var t=e||new Error('No "'.concat(this.entityName,'" entity to upsert'));return this.execute("POST",this.entityUrl,t)}},{key:"execute",value:function(e,t,n,a){var r,i={method:e,url:t,data:n,options:a};if(n instanceof Error)return this.handleError(i)(n);switch(e){case"DELETE":r=this.http.delete(t,a),this.saveDelay&&(r=r.pipe(Object(s.a)(this.saveDelay)));break;case"GET":r=this.http.get(t,a),this.getDelay&&(r=r.pipe(Object(s.a)(this.getDelay)));break;case"POST":r=this.http.post(t,n,a),this.saveDelay&&(r=r.pipe(Object(s.a)(this.saveDelay)));break;case"PUT":r=this.http.put(t,n,a),this.saveDelay&&(r=r.pipe(Object(s.a)(this.saveDelay)));break;default:var u=new Error("Unimplemented HTTP method, "+e);r=Object(g.a)(u)}return this.timeout&&(r=r.pipe(Object(c.a)(this.timeout+this.saveDelay))),r.pipe(Object(o.a)(this.handleError(i)))}},{key:"handleError",value:function(e){var t=this;return function(n){var a=t.handleDelete404(n,e);if(a)return a;var r=new te(n,e);return Object(g.a)(r)}}},{key:"handleDelete404",value:function(e,t){if(404===e.status&&"DELETE"===t.method&&this.delete404OK)return Object(p.a)({})}},{key:"name",get:function(){return this._name}}]),e}(),ue=((V=function(){function e(t,n,a){_classCallCheck(this,e),this.http=t,this.httpUrlGenerator=n,this.config=a,n.registerHttpResourceUrls((a=a||{}).entityHttpResourceUrls)}return _createClass(e,[{key:"create",value:function(e){return new oe(e,this.http,this.httpUrlGenerator,this.config)}}]),e}()).\u0275fac=function(e){return new(e||V)(a.gc(f.b),a.gc(se),a.gc(ne,8))},V.\u0275prov=a.Ob({token:V,factory:V.\u0275fac}),V),le=new a.r("@ngrx/data/entity-metadata"),he=((X=function(){function e(t){var n=this;_classCallCheck(this,e),this.definitions={},t&&t.forEach((function(e){return n.registerMetadataMap(e)}))}return _createClass(e,[{key:"getDefinition",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=e.trim();var n=this.definitions[e];if(!n&&t)throw new Error('No EntityDefinition for entity type "'.concat(e,'".'));return n}},{key:"registerMetadata",value:function(e){if(e){var t=function(e){var t=e.entityName;if(!t)throw new Error("Missing required entityName");e.entityName=t=t.trim();var n=e.selectId||D,a=e.sortComparer=e.sortComparer||!1,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({sortComparer:!1,selectId:function(e){return e.id}},e),n=t.selectId,a=t.sortComparer,r={getInitialState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({ids:[],entities:{}},e)}},i={getSelectors:function(e){var t=function(e){return e.ids},n=function(e){return e.entities},a=Object(k.s)(t,n,(function(e,t){return e.map((function(e){return t[e]}))})),r=Object(k.s)(t,(function(e){return e.length}));return e?{selectIds:Object(k.s)(e,t),selectEntities:Object(k.s)(e,n),selectAll:Object(k.s)(e,a),selectTotal:Object(k.s)(e,r)}:{selectIds:t,selectEntities:n,selectAll:a,selectTotal:r}}},s=a?function(e,t){var n=j(e);function a(e,t){return r([e],t)}function r(t,n){var a=t.filter((function(t){return!(S(t,e)in n.entities)}));return 0===a.length?b.None:(o(a,n),b.Both)}function i(e,t){return t.entities={},t.ids=[],r(e,t),b.Both}function s(t,n){var a=[],r=t.filter((function(t){return function(t,n,a){if(!(n.id in a.entities))return!1;var r=Object.assign({},a.entities[n.id],n.changes),i=S(r,e);return delete a.entities[n.id],t.push(r),i!==n.id}(a,t,n)})).length>0;if(0===a.length)return b.None;var i=n.ids,s=[];return n.ids=n.ids.filter((function(e,t){return e in n.entities||(s.push(t),!1)})),o(a,n),!r&&s.every((function(e){return n.ids[e]===i[e]}))?b.EntitiesOnly:b.Both}function c(t,n){var a,i=[],c=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=S(u,e);l in n.entities?c.push({id:l,changes:u}):i.push(u)}}catch(y){o.e(y)}finally{o.f()}var h=s(c,n),d=r(i,n);switch(!0){case d===b.None&&h===b.None:return b.None;case d===b.Both||h===b.Both:return b.Both;default:return b.EntitiesOnly}}function o(n,a){n.sort(t);for(var r=[],i=0,s=0;i<n.length&&s<a.ids.length;){var c=n[i],o=S(c,e),u=a.ids[s];t(c,a.entities[u])<=0?(r.push(o),i++):(r.push(u),s++)}a.ids=r.concat(i<n.length?n.slice(i).map(e):a.ids.slice(s)),n.forEach((function(t,n){a.entities[e(t)]=t}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:C(a),updateOne:C((function(e,t){return s([e],t)})),upsertOne:C((function(e,t){return c([e],t)})),addAll:C(i),setAll:C(i),setOne:C((function(t,n){var r=S(t,e);return r in n.entities?(n.ids=n.ids.filter((function(e){return e!==r})),o([t],n),b.Both):a(t,n)})),addMany:C(r),updateMany:C(s),upsertMany:C(c),map:C((function(e,t){return s(t.ids.reduce((function(n,a){var r=e(t.entities[a]);return r!==t.entities[a]&&n.push({id:a,changes:r}),n}),[]),t)}))}}(n,a):j(n);return Object.assign(Object.assign(Object.assign({selectId:n,sortComparer:a},r),i),s)}({selectId:n,sortComparer:a}),i=e.entityDispatcherOptions||{},s=r.getInitialState(Object.assign({entityName:t,filter:"",loaded:!1,loading:!1,changeState:{}},e.additionalCollectionState||{}));return{entityName:t,entityAdapter:r,entityDispatcherOptions:i,initialState:s,metadata:e,noChangeTracking:!0===e.noChangeTracking,selectId:n,sortComparer:a}}(e);this.registerDefinition(t)}}},{key:"registerMetadataMap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t||{}).forEach((function(n){return e.registerMetadata(Object.assign({entityName:n},t[n]))}))}},{key:"registerDefinition",value:function(e){this.definitions[e.entityName]=e}},{key:"registerDefinitions",value:function(e){Object.assign(this.definitions,e)}}]),e}()).\u0275fac=function(e){return new(e||X)(a.gc(le,8))},X.\u0275prov=a.Ob({token:X,factory:X.\u0275fac}),X),de=((z=function(){function e(t,n,a){_classCallCheck(this,e),this.entityDefinitionService=t,this.http=n,this.idSelectors={},this.saveDelay=0,this.timeout=0;var r=a||{},i=r.saveDelay,s=void 0===i?0:i,c=r.timeout,o=void 0===c?0:c;this.saveDelay=s,this.timeout=o}return _createClass(e,[{key:"saveEntities",value:function(e,t){var n=this;e=this.filterChangeSet(e),e=this.flattenUpdates(e);var a=this.http.post(t,e).pipe(Object(i.a)((function(e){return n.restoreUpdates(e)})),Object(o.a)(this.handleError({method:"POST",url:t,data:e})));return this.timeout&&(a=a.pipe(Object(c.a)(this.timeout))),this.saveDelay&&(a=a.pipe(Object(s.a)(this.saveDelay))),a}},{key:"handleError",value:function(e){return function(t){var n=new te(t,e);return Object(g.a)(n)}}},{key:"filterChangeSet",value:function(e){return U(e)}},{key:"flattenUpdates",value:function(e){var t=e.changes;if(0===t.length)return e;var n=!1;return t=t.map((function(e){return"Update"===e.op&&e.entities.length>0?(n=!0,Object.assign(Object.assign({},e),{entities:e.entities.map((function(e){return e.changes}))})):e})),n?Object.assign(Object.assign({},e),{changes:t}):e}},{key:"restoreUpdates",value:function(e){var t=this;if(null==e)return e;var n=e.changes;if(0===n.length)return e;var a=!1;return n=n.map((function(e){if("Update"===e.op){a=!0;var n=t.getIdSelector(e.entityName);return Object.assign(Object.assign({},e),{entities:e.entities.map((function(e){return{id:n(e),changes:e}}))})}return e})),a?Object.assign(Object.assign({},e),{changes:n}):e}},{key:"getIdSelector",value:function(e){var t=this.idSelectors[e];return t||(t=this.entityDefinitionService.getDefinition(e).selectId,this.idSelectors[e]=t),t}}]),e}()).\u0275fac=function(e){return new(e||z)(a.gc(he),a.gc(f.b),a.gc(ne,8))},z.\u0275prov=a.Ob({token:z,factory:z.\u0275fac}),z),ye=((W=function(){function e(t){_classCallCheck(this,e),this.defaultDataServiceFactory=t,this.services={}}return _createClass(e,[{key:"getService",value:function(e){e=e.trim();var t=this.services[e];return t||(t=this.defaultDataServiceFactory.create(e),this.services[e]=t),t}},{key:"registerService",value:function(e,t){this.services[e.trim()]=t}},{key:"registerServices",value:function(e){this.services=Object.assign(Object.assign({},this.services),e)}}]),e}()).\u0275fac=function(e){return new(e||W)(a.gc(ue))},W.\u0275prov=a.Ob({token:W,factory:W.\u0275fac}),W),fe=function e(){_classCallCheck(this,e)},ge=((Y=function(){function e(t,n){_classCallCheck(this,e),this.logger=t,this.entityActionFactory=n}return _createClass(e,[{key:"handleSuccess",value:function(e){var t=this,n=Q(e.payload.entityOp);return function(a){return t.entityActionFactory.createFromAction(e,{entityOp:n,data:a})}}},{key:"handleError",value:function(e){var t=this,n=e.payload.entityOp+"/error";return function(a){var r={error:a instanceof te?a:new te(a,null),originalAction:e};return t.logger.error(r),t.entityActionFactory.createFromAction(e,{entityOp:n,data:r})}}}]),e}()).\u0275fac=function(e){return new(e||Y)(a.gc(ae),a.gc(A))},Y.\u0275prov=a.Ob({token:Y,factory:Y.\u0275fac}),Y),pe=((Z=function(){function e(){_classCallCheck(this,e),this.seed=0,this.prefix="CRID"}return _createClass(e,[{key:"next",value:function(){return this.seed+=1,this.prefix+this.seed}}]),e}()).\u0275fac=function(e){return new(e||Z)},Z.\u0275prov=a.Ob({token:Z,factory:Z.\u0275fac}),Z),ve=((J=function e(){_classCallCheck(this,e),this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}).\u0275fac=function(e){return new(e||J)},J.\u0275prov=a.Ob({token:J,factory:J.\u0275fac}),J),Oe=function e(t){_classCallCheck(this,e),this.message=t,this.message=t||"Canceled by user"},me=((ee=function(){function e(t,n,a,r){_classCallCheck(this,e),this.correlationIdGenerator=t,this.defaultDispatcherOptions=n,this.store=r,this.reducedActions$=a.pipe(Object(u.a)(1)),this.raSubscription=this.reducedActions$.subscribe()}return _createClass(e,[{key:"dispatch",value:function(e){return this.store.dispatch(e),e}},{key:"cancelSaveEntities",value:function(e,t,n,a){if(!e)throw new Error("Missing correlationId");var r=new q(e,t,n,a);this.dispatch(r)}},{key:"clearCollections",value:function(e,t){this.dispatch(new R(e,t))}},{key:"loadCollections",value:function(e,t){this.dispatch(new $(e,t))}},{key:"mergeQuerySet",value:function(e,t,n){this.dispatch(new F(e,t,n))}},{key:"setEntityCache",value:function(e,t){this.dispatch(new L(e,t))}},{key:"saveEntities",value:function(e,t,n){var a=Array.isArray(e)?{changes:e}:e,r=null==(n=n||{}).correlationId?this.correlationIdGenerator.next():n.correlationId,i=null==n.isOptimistic?this.defaultDispatcherOptions.optimisticSaveEntities||!1:!0===n.isOptimistic,s=n.tag||"Save Entities";n=Object.assign(Object.assign({},n),{correlationId:r,isOptimistic:i,tag:s});var c=new B(a,t,n);return this.dispatch(c),this.getSaveEntitiesResponseData$(n.correlationId).pipe(Object(u.a)(1))}},{key:"getSaveEntitiesResponseData$",value:function(e){return this.reducedActions$.pipe(Object(r.a)((function(e){return"@ngrx/data/entity-cache/save-entities-success"===e.type||"@ngrx/data/entity-cache/save-entities-error"===e.type||"@ngrx/data/entity-cache/save-entities-cancel"===e.type})),Object(r.a)((function(t){return e===t.payload.correlationId})),Object(l.a)(1),Object(h.a)((function(e){return"@ngrx/data/entity-cache/save-entities-cancel"===e.type?Object(g.a)(new Oe(e.payload.reason)):"@ngrx/data/entity-cache/save-entities-success"===e.type?Object(p.a)(e.payload.changeSet):Object(g.a)(e.payload)})))}}]),e}()).\u0275fac=function(e){return new(e||ee)(a.gc(pe),a.gc(ve),a.gc(k.g),a.gc(k.i))},ee.\u0275prov=a.Ob({token:ee,factory:ee.\u0275fac}),ee),ke=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;_classCallCheck(this,e),this.entityName=t,this.entityActionFactory=n,this.store=a,this.selectId=r,this.defaultDispatcherOptions=i,this.reducedActions$=s,this.correlationIdGenerator=o,this.guard=new w(t,r),this.toUpdate=M(r);var u=Object(k.s)(c,(function(e){return e[t]}));this.entityCollection$=a.select(u)}return _createClass(e,[{key:"createEntityAction",value:function(e,t,n){return this.entityActionFactory.create(Object.assign({entityName:this.entityName,entityOp:e,data:t},n))}},{key:"createAndDispatch",value:function(e,t,n){var a=this.createEntityAction(e,t,n);return this.dispatch(a),a}},{key:"dispatch",value:function(e){return this.store.dispatch(e),e}},{key:"add",value:function(e,t){var n=this;t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticAdd);var a=this.createEntityAction("@ngrx/data/save/add-one",e,t);return t.isOptimistic&&this.guard.mustBeEntity(a),this.dispatch(a),this.getResponseData$(t.correlationId).pipe(Object(d.a)(this.entityCollection$),Object(i.a)((function(e){var t=_slicedToArray(e,2),a=t[0];return t[1].entities[n.selectId(a)]})),Object(u.a)(1))}},{key:"cancel",value:function(e,t,n){if(!e)throw new Error("Missing correlationId");this.createAndDispatch("@ngrx/data/cancel-persist",t,{correlationId:e})}},{key:"delete",value:function(e,t){t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticDelete);var n=this.getKey(e),a=this.createEntityAction("@ngrx/data/save/delete-one",n,t);return this.guard.mustBeKey(a),this.dispatch(a),this.getResponseData$(t.correlationId).pipe(Object(i.a)((function(){return n})),Object(u.a)(1))}},{key:"getAll",value:function(e){var t=this;e=this.setQueryEntityActionOptions(e);var n=this.createEntityAction("@ngrx/data/query-all",null,e);return this.dispatch(n),this.getResponseData$(e.correlationId).pipe(Object(d.a)(this.entityCollection$),Object(i.a)((function(e){var n=_slicedToArray(e,2),a=n[0],r=n[1];return a.reduce((function(e,n){var a=r.entities[t.selectId(n)];return a&&e.push(a),e}),[])})),Object(u.a)(1))}},{key:"getByKey",value:function(e,t){var n=this;t=this.setQueryEntityActionOptions(t);var a=this.createEntityAction("@ngrx/data/query-by-key",e,t);return this.dispatch(a),this.getResponseData$(t.correlationId).pipe(Object(d.a)(this.entityCollection$),Object(i.a)((function(e){var t=_slicedToArray(e,2),a=t[0];return t[1].entities[n.selectId(a)]})),Object(u.a)(1))}},{key:"getWithQuery",value:function(e,t){var n=this;t=this.setQueryEntityActionOptions(t);var a=this.createEntityAction("@ngrx/data/query-many",e,t);return this.dispatch(a),this.getResponseData$(t.correlationId).pipe(Object(d.a)(this.entityCollection$),Object(i.a)((function(e){var t=_slicedToArray(e,2),a=t[0],r=t[1];return a.reduce((function(e,t){var a=r.entities[n.selectId(t)];return a&&e.push(a),e}),[])})),Object(u.a)(1))}},{key:"load",value:function(e){e=this.setQueryEntityActionOptions(e);var t=this.createEntityAction("@ngrx/data/query-load",null,e);return this.dispatch(t),this.getResponseData$(e.correlationId).pipe(Object(u.a)(1))}},{key:"update",value:function(e,t){var n=this,a=this.toUpdate(e);t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticUpdate);var r=this.createEntityAction("@ngrx/data/save/update-one",a,t);return t.isOptimistic&&this.guard.mustBeUpdate(r),this.dispatch(r),this.getResponseData$(t.correlationId).pipe(Object(i.a)((function(e){return e.changes})),Object(d.a)(this.entityCollection$),Object(i.a)((function(e){var t=_slicedToArray(e,2),a=t[0];return t[1].entities[n.selectId(a)]})),Object(u.a)(1))}},{key:"upsert",value:function(e,t){var n=this;t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticUpsert);var a=this.createEntityAction("@ngrx/data/save/upsert-one",e,t);return t.isOptimistic&&this.guard.mustBeEntity(a),this.dispatch(a),this.getResponseData$(t.correlationId).pipe(Object(d.a)(this.entityCollection$),Object(i.a)((function(e){var t=_slicedToArray(e,2),a=t[0];return t[1].entities[n.selectId(a)]})),Object(u.a)(1))}},{key:"addAllToCache",value:function(e,t){this.createAndDispatch("@ngrx/data/add-all",e,t)}},{key:"addOneToCache",value:function(e,t){this.createAndDispatch("@ngrx/data/add-one",e,t)}},{key:"addManyToCache",value:function(e,t){this.createAndDispatch("@ngrx/data/add-many",e,t)}},{key:"clearCache",value:function(e){this.createAndDispatch("@ngrx/data/remove-all",void 0,e)}},{key:"removeOneFromCache",value:function(e,t){this.createAndDispatch("@ngrx/data/remove-one",this.getKey(e),t)}},{key:"removeManyFromCache",value:function(e,t){var n=this;if(e&&0!==e.length){var a="object"==typeof e[0]?e.map((function(e){return n.getKey(e)})):e;this.createAndDispatch("@ngrx/data/remove-many",a,t)}}},{key:"updateOneInCache",value:function(e,t){var n=this.toUpdate(e);this.createAndDispatch("@ngrx/data/update-one",n,t)}},{key:"updateManyInCache",value:function(e,t){var n=this;if(e&&0!==e.length){var a=e.map((function(e){return n.toUpdate(e)}));this.createAndDispatch("@ngrx/data/update-many",a,t)}}},{key:"upsertOneInCache",value:function(e,t){this.createAndDispatch("@ngrx/data/upsert-one",e,t)}},{key:"upsertManyInCache",value:function(e,t){e&&0!==e.length&&this.createAndDispatch("@ngrx/data/upsert-many",e,t)}},{key:"setFilter",value:function(e){this.createAndDispatch("@ngrx/data/set-filter",e)}},{key:"setLoaded",value:function(e){this.createAndDispatch("@ngrx/data/set-loaded",!!e)}},{key:"setLoading",value:function(e){this.createAndDispatch("@ngrx/data/set-loading",!!e)}},{key:"getKey",value:function(e){return"object"==typeof e?this.selectId(e):e}},{key:"getResponseData$",value:function(e){var t=this;return this.reducedActions$.pipe(Object(r.a)((function(e){return!!e.payload})),Object(r.a)((function(n){var a=n.payload,r=a.correlationId,i=a.entityName,s=a.entityOp;return i===t.entityName&&r===e&&(s.endsWith("/success")||s.endsWith("/error")||"@ngrx/data/cancel-persist"===s)})),Object(l.a)(1),Object(h.a)((function(e){var t=e.payload.entityOp;return"@ngrx/data/cancel-persist"===t?Object(g.a)(new Oe(e.payload.data)):t.endsWith("/success")?Object(p.a)(e.payload.data):Object(g.a)(e.payload.data.error)})))}},{key:"setQueryEntityActionOptions",value:function(e){var t=null==(e=e||{}).correlationId?this.correlationIdGenerator.next():e.correlationId;return Object.assign(Object.assign({},e),{correlationId:t})}},{key:"setSaveEntityActionOptions",value:function(e,t){var n=null==(e=e||{}).correlationId?this.correlationIdGenerator.next():e.correlationId,a=null==e.isOptimistic?t||!1:!0===e.isOptimistic;return Object.assign(Object.assign({},e),{correlationId:n,isOptimistic:a})}}]),e}(),be=new a.r("@ngrx/data/entity-cache-name"),Ce=new a.r("@ngrx/data/entity-cache-meta-reducers"),Se=new a.r("@ngrx/data/entity-collection-meta-reducers"),je=new a.r("@ngrx/data/initial-entity-cache-state"),Ee=new a.r("@ngrx/data/entity-cache-selector"),xe={provide:Ee,useFactory:Ae,deps:[[new a.B,be]]};function Ae(e){return e=e||"entityCache",Object(k.q)(e)}var we,De,_e,Me,Ie,Te,Ue,Ne,Re,$e,Fe,Le,Be,qe,Pe,Ke,He,Qe,Ge=((we=function(){function e(t,n,a,r,i,s){_classCallCheck(this,e),this.entityActionFactory=t,this.store=n,this.entityDispatcherDefaultOptions=a,this.entityCacheSelector=i,this.correlationIdGenerator=s,this.reducedActions$=r.pipe(Object(u.a)(1)),this.raSubscription=this.reducedActions$.subscribe()}return _createClass(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign(Object.assign({},this.entityDispatcherDefaultOptions),n);return new ke(e,this.entityActionFactory,this.store,t,a,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}},{key:"ngOnDestroy",value:function(){this.raSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||we)(a.gc(A),a.gc(k.i),a.gc(ve),a.gc(k.g),a.gc(Ee),a.gc(pe))},we.\u0275prov=a.Ob({token:we,factory:we.\u0275fac}),we),Ve=new a.r("EntityEffects Scheduler"),We=((De=function(){function e(t,n,a,i,s){var c=this;_classCallCheck(this,e),this.actions=t,this.dataService=n,this.entityActionFactory=a,this.logger=i,this.scheduler=s,this.responseDelay=10,this.saveEntitiesCancel$=Object(x.d)((function(){return c.actions.pipe(Object(x.e)("@ngrx/data/entity-cache/save-entities-cancel"),Object(r.a)((function(e){return null!=e.payload.correlationId})))}),{dispatch:!1}),this.saveEntities$=Object(x.d)((function(){return c.actions.pipe(Object(x.e)("@ngrx/data/entity-cache/save-entities"),Object(h.a)((function(e){return c.saveEntities(e)})))}))}return _createClass(e,[{key:"saveEntities",value:function(e){var t=this,n=e.payload.error;if(n)return this.handleSaveEntitiesError$(e)(n);try{var a=U(e.payload.changeSet),s=e.payload,c=s.correlationId,u=s.mergeStrategy,l=s.tag,h=s.url,d={correlationId:c,mergeStrategy:u,tag:l};if(0===a.changes.length)return Object(p.a)(new H(a,h,d));var f=this.saveEntitiesCancel$.pipe(Object(r.a)((function(e){return c===e.payload.correlationId})),Object(i.a)((function(e){return new P(c,e.payload.reason,e.payload.tag)}))),g=this.dataService.saveEntities(a,h).pipe(Object(y.a)((function(n){return t.handleSaveEntitiesSuccess$(e,t.entityActionFactory)(n)})),Object(o.a)(this.handleSaveEntitiesError$(e)));return Object(v.a)(f,g)}catch(O){return this.handleSaveEntitiesError$(e)(O)}}},{key:"handleSaveEntitiesError$",value:function(e){var t=this;return function(n){var a=n instanceof te?n:new te(n,null);return Object(p.a)(new K(a,e)).pipe(Object(s.a)(t.responseDelay,t.scheduler||O.a))}}},{key:"handleSaveEntitiesSuccess$",value:function(e,t){var n=e.payload,a=n.url,r={correlationId:n.correlationId,mergeStrategy:n.mergeStrategy,tag:n.tag};return function(n){if(n)return Object(p.a)(new H(n,a,r));if(n=e.payload.changeSet,!e.payload.isOptimistic)return Object(p.a)(new H(n,a,r));var i=n.changes.reduce((function(e,t){return-1===e.indexOf(t.entityName)?e.concat(t.entityName):e}),[]);return Object(m.a)(i.map((function(e){return t.create(e,"@ngrx/data/set-loading",!1)})))}}}]),e}()).\u0275fac=function(e){return new(e||De)(a.gc(x.a),a.gc(de),a.gc(A),a.gc(ae),a.gc(Ve,8))},De.\u0275prov=a.Ob({token:De,factory:De.\u0275fac}),De),ze=["@ngrx/data/query-all","@ngrx/data/query-load","@ngrx/data/query-by-key","@ngrx/data/query-many","@ngrx/data/save/add-one","@ngrx/data/save/delete-one","@ngrx/data/save/update-one","@ngrx/data/save/upsert-one"],Xe=((_e=function(){function e(t,n,a,s,c){var o=this;_classCallCheck(this,e),this.actions=t,this.dataService=n,this.entityActionFactory=a,this.resultHandler=s,this.scheduler=c,this.responseDelay=10,this.cancel$=Object(x.d)((function(){return o.actions.pipe(I("@ngrx/data/cancel-persist"),Object(i.a)((function(e){return e.payload.correlationId})),Object(r.a)((function(e){return null!=e})))}),{dispatch:!1}),this.persist$=Object(x.d)((function(){return o.actions.pipe(I(ze),Object(h.a)((function(e){return o.persist(e)})))}))}return _createClass(e,[{key:"persist",value:function(e){var t=this;if(e.payload.skip)return this.handleSkipSuccess$(e);if(e.payload.error)return this.handleError$(e)(e.payload.error);try{var n=this.cancel$.pipe(Object(r.a)((function(t){return e.payload.correlationId===t})),Object(i.a)((function(n){return t.entityActionFactory.createFromAction(e,{entityOp:"@ngrx/data/canceled-persist"})}))),a=this.callDataService(e).pipe(Object(i.a)(this.resultHandler.handleSuccess(e)),Object(o.a)(this.handleError$(e)));return Object(v.a)(n,a)}catch(s){return this.handleError$(e)(s)}}},{key:"callDataService",value:function(e){var t=e.payload,n=t.entityName,a=t.entityOp,r=t.data,s=this.dataService.getService(n);switch(a){case"@ngrx/data/query-all":case"@ngrx/data/query-load":return s.getAll();case"@ngrx/data/query-by-key":return s.getById(r);case"@ngrx/data/query-many":return s.getWithQuery(r);case"@ngrx/data/save/add-one":return s.add(r);case"@ngrx/data/save/delete-one":return s.delete(r);case"@ngrx/data/save/update-one":var c=r.id,o=r.changes;return s.update(r).pipe(Object(i.a)((function(e){return e&&Object.keys(e).length>0?{id:c,changes:Object.assign(Object.assign({},o),e),changed:!0}:{id:c,changes:o,changed:!1}})));case"@ngrx/data/save/upsert-one":return s.upsert(r).pipe(Object(i.a)((function(e){return e&&Object.keys(e).length>0?e:r})));default:throw new Error('Persistence action "'.concat(a,'" is not implemented.'))}}},{key:"handleError$",value:function(e){var t=this;return function(n){return Object(p.a)(t.resultHandler.handleError(e)(n)).pipe(Object(s.a)(t.responseDelay,t.scheduler||O.a))}}},{key:"handleSkipSuccess$",value:function(e){var t=Q(e.payload.entityOp),n=this.entityActionFactory.createFromAction(e,{entityOp:t});return Object(p.a)(n).pipe(Object(s.a)(this.responseDelay,this.scheduler||O.a))}}]),e}()).\u0275fac=function(e){return new(e||_e)(a.gc(x.a),a.gc(ye),a.gc(A),a.gc(fe),a.gc(Ve,8))},_e.\u0275prov=a.Ob({token:_e,factory:_e.\u0275fac}),_e),Je=function(){function e(t,n){_classCallCheck(this,e),this.entityName=t,t=t.trim();var a=n.create(t),r=a.dispatcher,i=a.selectors,s=a.selectors$;this.entityName=t,this.dispatcher=r,this.guard=r.guard,this.selectId=r.selectId,this.toUpdate=r.toUpdate,this.selectors=i,this.selectors$=s,this.collection$=s.collection$,this.count$=s.count$,this.entities$=s.entities$,this.entityActions$=s.entityActions$,this.entityMap$=s.entityMap$,this.errors$=s.errors$,this.filter$=s.filter$,this.filteredEntities$=s.filteredEntities$,this.keys$=s.keys$,this.loaded$=s.loaded$,this.loading$=s.loading$,this.changeState$=s.changeState$}return _createClass(e,[{key:"createEntityAction",value:function(e,t,n){return this.dispatcher.createEntityAction(e,t,n)}},{key:"createAndDispatch",value:function(e,t,n){return this.dispatcher.createAndDispatch(e,t,n)}},{key:"dispatch",value:function(e){return this.dispatcher.dispatch(e)}},{key:"add",value:function(e,t){return this.dispatcher.add(e,t)}},{key:"cancel",value:function(e,t,n){this.dispatcher.cancel(e,t,n)}},{key:"delete",value:function(e,t){return this.dispatcher.delete(e,t)}},{key:"getAll",value:function(e){return this.dispatcher.getAll(e)}},{key:"getByKey",value:function(e,t){return this.dispatcher.getByKey(e,t)}},{key:"getWithQuery",value:function(e,t){return this.dispatcher.getWithQuery(e,t)}},{key:"load",value:function(e){return this.dispatcher.load(e)}},{key:"update",value:function(e,t){return this.dispatcher.update(e,t)}},{key:"upsert",value:function(e,t){return this.dispatcher.upsert(e,t)}},{key:"addAllToCache",value:function(e,t){this.dispatcher.addAllToCache(e,t)}},{key:"addOneToCache",value:function(e,t){this.dispatcher.addOneToCache(e,t)}},{key:"addManyToCache",value:function(e,t){this.dispatcher.addManyToCache(e,t)}},{key:"clearCache",value:function(){this.dispatcher.clearCache()}},{key:"removeOneFromCache",value:function(e,t){this.dispatcher.removeOneFromCache(e,t)}},{key:"removeManyFromCache",value:function(e,t){this.dispatcher.removeManyFromCache(e,t)}},{key:"updateOneInCache",value:function(e,t){this.dispatcher.updateOneInCache(e,t)}},{key:"updateManyInCache",value:function(e,t){this.dispatcher.updateManyInCache(e,t)}},{key:"upsertOneInCache",value:function(e,t){this.dispatcher.upsertOneInCache(e,t)}},{key:"upsertManyInCache",value:function(e,t){this.dispatcher.upsertManyInCache(e,t)}},{key:"setFilter",value:function(e){this.dispatcher.setFilter(e)}},{key:"setLoaded",value:function(e){this.dispatcher.setLoaded(!!e)}},{key:"setLoading",value:function(e){this.dispatcher.setLoading(!!e)}},{key:"store",get:function(){return this.dispatcher.store}}]),e}(),Ze=(($e=function(){function e(t){_classCallCheck(this,e),this.entityDefinitionService=t}return _createClass(e,[{key:"create",value:function(e){var t=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(e,!1);return t&&t.initialState||function(e){return{entityName:e,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}(e)}}]),e}()).\u0275fac=function(e){return new(e||$e)(a.gc(he,8))},$e.\u0275prov=a.Ob({token:$e,factory:$e.\u0275fac}),$e),Ye=((Re=function(){function e(t,n){_classCallCheck(this,e),this.entityCollectionCreator=t||new Ze,this.selectEntityCache=n||Ae("entityCache")}return _createClass(e,[{key:"createCollectionSelector",value:function(e){var t=this;return Object(k.s)(this.selectEntityCache,(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n[e]||t.entityCollectionCreator.create(e)}))}},{key:"createCollectionSelectors",value:function(e){var t="string"==typeof e?{entityName:e}:e,n=function(e){return e.ids},a=function(e){return e.entities},r=Object(k.s)(n,a,(function(e,t){return e.map((function(e){return t[e]}))})),i=Object(k.s)(n,(function(e){return e.length})),s=function(e){return e.filter},c=t.filterFn,o=c?Object(k.s)(r,s,(function(e,t){return c(e,t)})):r,u={};return Object.keys(t.additionalCollectionState||{}).forEach((function(e){u["select"+e[0].toUpperCase()+e.slice(1)]=function(t){return t[e]}})),Object.assign({selectCount:i,selectEntities:r,selectEntityMap:a,selectFilter:s,selectFilteredEntities:o,selectKeys:n,selectLoaded:function(e){return e.loaded},selectLoading:function(e){return e.loading},selectChangeState:function(e){return e.changeState}},u)}},{key:"create",value:function(e){var t="string"==typeof e?{entityName:e}:e,n=t.entityName,a=this.createCollectionSelector(n),r=this.createCollectionSelectors(t),i={};return Object.keys(r).forEach((function(e){i[e]=Object(k.s)(a,r[e])})),Object.assign({entityName:n,selectCollection:a,selectEntityCache:this.selectEntityCache},i)}}]),e}()).\u0275fac=function(e){return new(e||Re)(a.gc(Ze,8),a.gc(Ee,8))},Re.\u0275prov=a.Ob({token:Re,factory:Re.\u0275fac}),Re),et=((Ne=function(){function e(t,n,a){_classCallCheck(this,e),this.store=t,this.actions=n,this.selectEntityCache=a,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=n.pipe(Object(r.a)((function(e){return e.payload&&e.payload.entityOp&&e.payload.entityOp.endsWith("/error")})),Object(u.a)(1))}return _createClass(e,[{key:"create",value:function(e,t){var n=this,a={entityName:e};return Object.keys(t).forEach((function(e){if(e.startsWith("select")){var r=e[6].toLowerCase()+e.substr(7)+"$";a[r]=n.store.select(t[e])}})),a.entityActions$=this.actions.pipe(T(e)),a.errors$=this.entityActionErrors$.pipe(T(e)),a}}]),e}()).\u0275fac=function(e){return new(e||Ne)(a.gc(k.i),a.gc(x.a),a.gc(Ee))},Ne.\u0275prov=a.Ob({token:Ne,factory:Ne.\u0275fac}),Ne),tt=((Ue=function(){function e(t,n,a,r){_classCallCheck(this,e),this.entityDispatcherFactory=t,this.entityDefinitionService=n,this.entitySelectorsFactory=a,this.entitySelectors$Factory=r}return _createClass(e,[{key:"create",value:function(e){e=e.trim();var t=this.entityDefinitionService.getDefinition(e),n=this.entityDispatcherFactory.create(e,t.selectId,t.entityDispatcherOptions),a=this.entitySelectorsFactory.create(t.metadata);return{dispatcher:n,entityName:e,selectors:a,selectors$:this.entitySelectors$Factory.create(e,a)}}}]),e}()).\u0275fac=function(e){return new(e||Ue)(a.gc(Ge),a.gc(he),a.gc(Ye),a.gc(et))},Ue.\u0275prov=a.Ob({token:Ue,factory:Ue.\u0275fac}),Ue),nt=((Te=function(){function e(t){_classCallCheck(this,e),this.entityCollectionServiceElementsFactory=t}return _createClass(e,[{key:"create",value:function(e){return new Je(e,this.entityCollectionServiceElementsFactory)}}]),e}()).\u0275fac=function(e){return new(e||Te)(a.gc(tt))},Te.\u0275prov=a.Ob({token:Te,factory:Te.\u0275fac}),Te),at=((Ie=function e(t,n,a,r){_classCallCheck(this,e),this.entityCollectionServiceFactory=t,this.store=r,this.entityActionErrors$=a.entityActionErrors$,this.entityCache$=a.entityCache$,this.reducedActions$=n.reducedActions$}).\u0275fac=function(e){return new(e||Ie)(a.gc(nt),a.gc(Ge),a.gc(et),a.gc(k.i))},Ie.\u0275prov=a.Ob({token:Ie,factory:Ie.\u0275fac}),Ie),rt=((Me=function(){function e(t){_classCallCheck(this,e),this.entityServicesElements=t,this.EntityCollectionServices={}}return _createClass(e,[{key:"dispatch",value:function(e){this.store.dispatch(e)}},{key:"createEntityCollectionService",value:function(e){return this.entityCollectionServiceFactory.create(e)}},{key:"getEntityCollectionService",value:function(e){var t=this.EntityCollectionServices[e];return t||(t=this.createEntityCollectionService(e),this.EntityCollectionServices[e]=t),t}},{key:"registerEntityCollectionService",value:function(e,t){this.EntityCollectionServices[t||e.entityName]=e}},{key:"registerEntityCollectionServices",value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.registerEntityCollectionService(e)})):Object.keys(e||{}).forEach((function(n){t.registerEntityCollectionService(e[n],n)}))}},{key:"entityActionErrors$",get:function(){return this.entityServicesElements.entityActionErrors$}},{key:"entityCache$",get:function(){return this.entityServicesElements.entityCache$}},{key:"entityCollectionServiceFactory",get:function(){return this.entityServicesElements.entityCollectionServiceFactory}},{key:"reducedActions$",get:function(){return this.entityServicesElements.reducedActions$}},{key:"store",get:function(){return this.entityServicesElements.store}}]),e}()).\u0275fac=function(e){return new(e||Me)(a.gc(at))},Me.\u0275prov=a.Ob({token:Me,factory:Me.\u0275fac}),Me),it=function e(){_classCallCheck(this,e)},st=function(){var e={Unchanged:0,Added:1,Deleted:2,Updated:3};return e[e.Unchanged]="Unchanged",e[e.Added]="Added",e[e.Deleted]="Deleted",e[e.Updated]="Updated",e}(),ct=function(){function e(t,n){_classCallCheck(this,e),this.adapter=t,this.selectId=n,this.selectId=n||D}return _createClass(e,[{key:"commitAll",value:function(e){return 0===Object.keys(e.changeState).length?e:Object.assign(Object.assign({},e),{changeState:{}})}},{key:"commitMany",value:function(e,t){var n=this;if(null==e||0===e.length)return t;var a=!1,r=e.reduce((function(e,t){var r="object"==typeof t?n.selectId(t):t;return e[r]&&(a||(e=Object.assign({},e),a=!0),delete e[r]),e}),t.changeState);return a?Object.assign(Object.assign({},t),{changeState:r}):t}},{key:"commitOne",value:function(e,t){return null==e?t:this.commitMany([e],t)}},{key:"mergeQueryResults",value:function(e,t,n){return this.mergeServerUpserts(e,t,N.PreserveChanges,n)}},{key:"mergeSaveAdds",value:function(e,t,n){return this.mergeServerUpserts(e,t,N.OverwriteChanges,n)}},{key:"mergeSaveDeletes",value:function(e,t,n){var a=e;return t=(n=null==n?N.OverwriteChanges:n)===N.IgnoreChanges?t:this.commitMany(a,t),this.adapter.removeMany(a,t)}},{key:"mergeSaveUpdates",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==e||0===e.length)return t;var i,s=!1,c=t.changeState;switch(n=null==n?N.OverwriteChanges:n){case N.IgnoreChanges:return i=u(e),this.adapter.updateMany(i,t);case N.OverwriteChanges:return c=e.reduce((function(e,t){var n=t.id;return e[n]&&(s||(e=Object.assign({},e),s=!0),delete e[n]),e}),t.changeState),t=s?Object.assign(Object.assign({},t),{changeState:c}):t,i=u(e),this.adapter.updateMany(i,t);case N.PreserveChanges:var o=[];return c=e.reduce((function(e,t){var n=t.id,r=e[n];if(r){s||(e=Object.assign({},e),s=!0);var i=a.selectId(t.changes),c=r;i!==n&&delete e[n];var u=Object.assign(Object.assign({},c.originalValue),t.changes);e[i]=Object.assign(Object.assign({},c),{originalValue:u})}else o.push(t);return e}),t.changeState),t=s?Object.assign(Object.assign({},t),{changeState:c}):t,i=u(o),this.adapter.updateMany(i,t)}function u(e){return!0===r&&(e=e.filter((function(e){return!0===e.changed}))),e.map((function(e){return{id:e.id,changes:e.changes}}))}}},{key:"mergeSaveUpserts",value:function(e,t,n){return this.mergeServerUpserts(e,t,N.OverwriteChanges,n)}},{key:"mergeServerUpserts",value:function(e,t,n,a){var r=this;if(null==e||0===e.length)return t;var i=!1,s=t.changeState;switch(a=null==a?n:a){case N.IgnoreChanges:return this.adapter.upsertMany(e,t);case N.OverwriteChanges:return t=this.adapter.upsertMany(e,t),s=e.reduce((function(e,t){var n=r.selectId(t);return e[n]&&(i||(e=Object.assign({},e),i=!0),delete e[n]),e}),t.changeState),i?Object.assign(Object.assign({},t),{changeState:s}):t;case N.PreserveChanges:var c=[];return s=e.reduce((function(e,t){var n=r.selectId(t);return e[n]?i||(e=Object.assign(Object.assign({},e),_defineProperty({},n,Object.assign(Object.assign({},e[n]),{originalValue:t}))),i=!0):c.push(t),e}),t.changeState),t=this.adapter.upsertMany(c,t),i?Object.assign(Object.assign({},t),{changeState:s}):t}}},{key:"trackAddMany",value:function(e,t,n){var a=this;if(n===N.IgnoreChanges||null==e||0===e.length)return t;var r=!1,i=e.reduce((function(e,n){var i=a.selectId(n);if(null==i||""===i)throw new Error(t.entityName+" entity add requires a key to be tracked");return e[i]||(r||(r=!0,e=Object.assign({},e)),e[i]={changeType:st.Added}),e}),t.changeState);return r?Object.assign(Object.assign({},t),{changeState:i}):t}},{key:"trackAddOne",value:function(e,t,n){return null==e?t:this.trackAddMany([e],t,n)}},{key:"trackDeleteMany",value:function(e,t,n){if(n===N.IgnoreChanges||null==e||0===e.length)return t;var a=!1,r=t.entities,i=e.reduce((function(e,t){var n=r[t];if(n){var i=e[t];i?i.changeType===st.Added?(s(),delete e[t]):i.changeType===st.Updated&&(s(),i.changeType=st.Deleted):(s(),e[t]={changeType:st.Deleted,originalValue:n})}return e;function s(){a||(a=!0,e=Object.assign({},e))}}),t.changeState);return a?Object.assign(Object.assign({},t),{changeState:i}):t}},{key:"trackDeleteOne",value:function(e,t,n){return null==e?t:this.trackDeleteMany([e],t,n)}},{key:"trackUpdateMany",value:function(e,t,n){if(n===N.IgnoreChanges||null==e||0===e.length)return t;var a=!1,r=t.entities,i=e.reduce((function(e,n){var i=n.id;if(null==i||""===i)throw new Error(t.entityName+" entity update requires a key to be tracked");var s=r[i];return s&&(e[i]||(a||(a=!0,e=Object.assign({},e)),e[i]={changeType:st.Updated,originalValue:s})),e}),t.changeState);return a?Object.assign(Object.assign({},t),{changeState:i}):t}},{key:"trackUpdateOne",value:function(e,t,n){return null==e?t:this.trackUpdateMany([e],t,n)}},{key:"trackUpsertMany",value:function(e,t,n){var a=this;if(n===N.IgnoreChanges||null==e||0===e.length)return t;var r=!1,i=t.entities,s=e.reduce((function(e,n){var s=a.selectId(n);if(null==s||""===s)throw new Error(t.entityName+" entity upsert requires a key to be tracked");if(!e[s]){r||(r=!0,e=Object.assign({},e));var c=i[s];e[s]=null==c?{changeType:st.Added}:{changeType:st.Updated,originalValue:c}}return e}),t.changeState);return r?Object.assign(Object.assign({},t),{changeState:s}):t}},{key:"trackUpsertOne",value:function(e,t,n){return null==e?t:this.trackUpsertMany([e],t,n)}},{key:"undoAll",value:function(e){var t=Object.keys(e.changeState).reduce((function(e,t){var n=e.chgState[t];switch(n.changeType){case st.Added:e.remove.push(t);break;case st.Deleted:var a=n.originalValue;a&&e.upsert.push(a);break;case st.Updated:e.upsert.push(n.originalValue)}return e}),{remove:[],upsert:[],chgState:e.changeState}),n=t.remove,a=t.upsert;return e=this.adapter.removeMany(n,e),e=this.adapter.upsertMany(a,e),Object.assign(Object.assign({},e),{changeState:{}})}},{key:"undoMany",value:function(e,t){var n=this;if(null==e||0===e.length)return t;var a=!1,r=e.reduce((function(e,t){var r=e.changeState,i="object"==typeof t?n.selectId(t):t,s=r[i];if(s)switch(a||(r=Object.assign({},r),a=!0),delete r[i],e.changeState=r,s.changeType){case st.Added:e.remove.push(i);break;case st.Deleted:var c=s.originalValue;c&&e.upsert.push(c);break;case st.Updated:e.upsert.push(s.originalValue)}return e}),{remove:[],upsert:[],changeState:t.changeState}),i=r.changeState,s=r.remove,c=r.upsert;return t=this.adapter.removeMany(s,t),t=this.adapter.upsertMany(c,t),a?Object.assign(Object.assign({},t),{changeState:i}):t}},{key:"undoOne",value:function(e,t){return null==e?t:this.undoMany([e],t)}}]),e}(),ot=function(){function e(t,n,a){_classCallCheck(this,e),this.entityName=t,this.definition=n,this.methods={"@ngrx/data/cancel-persist":this.cancelPersist.bind(this),"@ngrx/data/query-all":this.queryAll.bind(this),"@ngrx/data/query-all/error":this.queryAllError.bind(this),"@ngrx/data/query-all/success":this.queryAllSuccess.bind(this),"@ngrx/data/query-by-key":this.queryByKey.bind(this),"@ngrx/data/query-by-key/error":this.queryByKeyError.bind(this),"@ngrx/data/query-by-key/success":this.queryByKeySuccess.bind(this),"@ngrx/data/query-load":this.queryLoad.bind(this),"@ngrx/data/query-load/error":this.queryLoadError.bind(this),"@ngrx/data/query-load/success":this.queryLoadSuccess.bind(this),"@ngrx/data/query-many":this.queryMany.bind(this),"@ngrx/data/query-many/error":this.queryManyError.bind(this),"@ngrx/data/query-many/success":this.queryManySuccess.bind(this),"@ngrx/data/save/add-many":this.saveAddMany.bind(this),"@ngrx/data/save/add-many/error":this.saveAddManyError.bind(this),"@ngrx/data/save/add-many/success":this.saveAddManySuccess.bind(this),"@ngrx/data/save/add-one":this.saveAddOne.bind(this),"@ngrx/data/save/add-one/error":this.saveAddOneError.bind(this),"@ngrx/data/save/add-one/success":this.saveAddOneSuccess.bind(this),"@ngrx/data/save/delete-many":this.saveDeleteMany.bind(this),"@ngrx/data/save/delete-many/error":this.saveDeleteManyError.bind(this),"@ngrx/data/save/delete-many/success":this.saveDeleteManySuccess.bind(this),"@ngrx/data/save/delete-one":this.saveDeleteOne.bind(this),"@ngrx/data/save/delete-one/error":this.saveDeleteOneError.bind(this),"@ngrx/data/save/delete-one/success":this.saveDeleteOneSuccess.bind(this),"@ngrx/data/save/update-many":this.saveUpdateMany.bind(this),"@ngrx/data/save/update-many/error":this.saveUpdateManyError.bind(this),"@ngrx/data/save/update-many/success":this.saveUpdateManySuccess.bind(this),"@ngrx/data/save/update-one":this.saveUpdateOne.bind(this),"@ngrx/data/save/update-one/error":this.saveUpdateOneError.bind(this),"@ngrx/data/save/update-one/success":this.saveUpdateOneSuccess.bind(this),"@ngrx/data/save/upsert-many":this.saveUpsertMany.bind(this),"@ngrx/data/save/upsert-many/error":this.saveUpsertManyError.bind(this),"@ngrx/data/save/upsert-many/success":this.saveUpsertManySuccess.bind(this),"@ngrx/data/save/upsert-one":this.saveUpsertOne.bind(this),"@ngrx/data/save/upsert-one/error":this.saveUpsertOneError.bind(this),"@ngrx/data/save/upsert-one/success":this.saveUpsertOneSuccess.bind(this),"@ngrx/data/add-all":this.addAll.bind(this),"@ngrx/data/add-many":this.addMany.bind(this),"@ngrx/data/add-one":this.addOne.bind(this),"@ngrx/data/remove-all":this.removeAll.bind(this),"@ngrx/data/remove-many":this.removeMany.bind(this),"@ngrx/data/remove-one":this.removeOne.bind(this),"@ngrx/data/update-many":this.updateMany.bind(this),"@ngrx/data/update-one":this.updateOne.bind(this),"@ngrx/data/upsert-many":this.upsertMany.bind(this),"@ngrx/data/upsert-one":this.upsertOne.bind(this),"@ngrx/data/commit-all":this.commitAll.bind(this),"@ngrx/data/commit-many":this.commitMany.bind(this),"@ngrx/data/commit-one":this.commitOne.bind(this),"@ngrx/data/undo-all":this.undoAll.bind(this),"@ngrx/data/undo-many":this.undoMany.bind(this),"@ngrx/data/undo-one":this.undoOne.bind(this),"@ngrx/data/set-change-state":this.setChangeState.bind(this),"@ngrx/data/set-collection":this.setCollection.bind(this),"@ngrx/data/set-filter":this.setFilter.bind(this),"@ngrx/data/set-loaded":this.setLoaded.bind(this),"@ngrx/data/set-loading":this.setLoading.bind(this)},this.adapter=n.entityAdapter,this.isChangeTracking=!0!==n.noChangeTracking,this.selectId=n.selectId,this.guard=new w(t,this.selectId),this.toUpdate=M(this.selectId),this.entityChangeTracker=a||new ct(this.adapter,this.selectId)}return _createClass(e,[{key:"cancelPersist",value:function(e){return this.setLoadingFalse(e)}},{key:"queryAll",value:function(e){return this.setLoadingTrue(e)}},{key:"queryAllError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"queryAllSuccess",value:function(e,t){var n=this.extractData(t),a=this.extractMergeStrategy(t);return Object.assign(Object.assign({},this.entityChangeTracker.mergeQueryResults(n,e,a)),{loaded:!0,loading:!1})}},{key:"queryByKey",value:function(e,t){return this.setLoadingTrue(e)}},{key:"queryByKeyError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"queryByKeySuccess",value:function(e,t){var n=this.extractData(t),a=this.extractMergeStrategy(t);return e=null==n?e:this.entityChangeTracker.mergeQueryResults([n],e,a),this.setLoadingFalse(e)}},{key:"queryLoad",value:function(e){return this.setLoadingTrue(e)}},{key:"queryLoadError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"queryLoadSuccess",value:function(e,t){var n=this.extractData(t);return Object.assign(Object.assign({},this.adapter.addAll(n,e)),{loading:!1,loaded:!0,changeState:{}})}},{key:"queryMany",value:function(e,t){return this.setLoadingTrue(e)}},{key:"queryManyError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"queryManySuccess",value:function(e,t){var n=this.extractData(t),a=this.extractMergeStrategy(t);return Object.assign(Object.assign({},this.entityChangeTracker.mergeQueryResults(n,e,a)),{loading:!1})}},{key:"saveAddMany",value:function(e,t){if(this.isOptimistic(t)){var n=this.guard.mustBeEntities(t),a=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackAddMany(n,e,a),e=this.adapter.addMany(n,e)}return this.setLoadingTrue(e)}},{key:"saveAddManyError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveAddManySuccess",value:function(e,t){var n=this.guard.mustBeEntities(t),a=this.extractMergeStrategy(t);return e=this.isOptimistic(t)?this.entityChangeTracker.mergeSaveUpserts(n,e,a):this.entityChangeTracker.mergeSaveAdds(n,e,a),this.setLoadingFalse(e)}},{key:"saveAddOne",value:function(e,t){if(this.isOptimistic(t)){var n=this.guard.mustBeEntity(t),a=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackAddOne(n,e,a),e=this.adapter.addOne(n,e)}return this.setLoadingTrue(e)}},{key:"saveAddOneError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveAddOneSuccess",value:function(e,t){var n=this.guard.mustBeEntity(t),a=this.extractMergeStrategy(t);if(this.isOptimistic(t)){var r=this.toUpdate(n);e=this.entityChangeTracker.mergeSaveUpdates([r],e,a,!1)}else e=this.entityChangeTracker.mergeSaveAdds([n],e,a);return this.setLoadingFalse(e)}},{key:"saveDeleteOne",value:function(e,t){var n=this.extractData(t),a="object"==typeof n?this.selectId(n):n,r=e.changeState[a];if(r&&(r.changeType===st.Added?(e=this.adapter.removeOne(a,e),e=this.entityChangeTracker.commitOne(a,e),t.payload.skip=!0):e=this.entityChangeTracker.trackDeleteOne(a,e)),this.isOptimistic(t)){var i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackDeleteOne(a,e,i),e=this.adapter.removeOne(a,e)}return this.setLoadingTrue(e)}},{key:"saveDeleteOneError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveDeleteOneSuccess",value:function(e,t){var n=this.extractData(t);if(this.isOptimistic(t)){var a=this.extractMergeStrategy(t);e=this.entityChangeTracker.mergeSaveDeletes([n],e,a)}else e=this.adapter.removeOne(n,e),e=this.entityChangeTracker.commitOne(n,e);return this.setLoadingFalse(e)}},{key:"saveDeleteMany",value:function(e,t){var n=this,a=this.extractData(t).map((function(e){return"object"==typeof e?n.selectId(e):e}));if(a.forEach((function(a){var r=e.changeState[a];r&&(r.changeType===st.Added?(e=n.adapter.removeOne(a,e),e=n.entityChangeTracker.commitOne(a,e),t.payload.skip=!0):e=n.entityChangeTracker.trackDeleteOne(a,e))})),this.isOptimistic(t)){var r=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackDeleteMany(a,e,r),e=this.adapter.removeMany(a,e)}return this.setLoadingTrue(e)}},{key:"saveDeleteManyError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveDeleteManySuccess",value:function(e,t){var n=this.extractData(t);if(this.isOptimistic(t)){var a=this.extractMergeStrategy(t);e=this.entityChangeTracker.mergeSaveDeletes(n,e,a)}else e=this.adapter.removeMany(n,e),e=this.entityChangeTracker.commitMany(n,e);return this.setLoadingFalse(e)}},{key:"saveUpdateOne",value:function(e,t){var n=this.guard.mustBeUpdate(t);if(this.isOptimistic(t)){var a=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpdateOne(n,e,a),e=this.adapter.updateOne(n,e)}return this.setLoadingTrue(e)}},{key:"saveUpdateOneError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveUpdateOneSuccess",value:function(e,t){var n=this.guard.mustBeUpdateResponse(t),a=this.isOptimistic(t),r=this.extractMergeStrategy(t);return e=this.entityChangeTracker.mergeSaveUpdates([n],e,r,a),this.setLoadingFalse(e)}},{key:"saveUpdateMany",value:function(e,t){var n=this.guard.mustBeUpdates(t);if(this.isOptimistic(t)){var a=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpdateMany(n,e,a),e=this.adapter.updateMany(n,e)}return this.setLoadingTrue(e)}},{key:"saveUpdateManyError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveUpdateManySuccess",value:function(e,t){var n=this.guard.mustBeUpdateResponses(t),a=(this.isOptimistic(t),this.extractMergeStrategy(t));return e=this.entityChangeTracker.mergeSaveUpdates(n,e,a,!1),this.setLoadingFalse(e)}},{key:"saveUpsertOne",value:function(e,t){if(this.isOptimistic(t)){var n=this.guard.mustBeEntity(t),a=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpsertOne(n,e,a),e=this.adapter.upsertOne(n,e)}return this.setLoadingTrue(e)}},{key:"saveUpsertOneError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveUpsertOneSuccess",value:function(e,t){var n=this.guard.mustBeEntity(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.mergeSaveUpserts([n],e,a),this.setLoadingFalse(e)}},{key:"saveUpsertMany",value:function(e,t){if(this.isOptimistic(t)){var n=this.guard.mustBeEntities(t),a=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpsertMany(n,e,a),e=this.adapter.upsertMany(n,e)}return this.setLoadingTrue(e)}},{key:"saveUpsertManyError",value:function(e,t){return this.setLoadingFalse(e)}},{key:"saveUpsertManySuccess",value:function(e,t){var n=this.guard.mustBeEntities(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.mergeSaveUpserts(n,e,a),this.setLoadingFalse(e)}},{key:"addAll",value:function(e,t){var n=this.guard.mustBeEntities(t);return Object.assign(Object.assign({},this.adapter.addAll(n,e)),{loading:!1,loaded:!0,changeState:{}})}},{key:"addMany",value:function(e,t){var n=this.guard.mustBeEntities(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackAddMany(n,e,a),this.adapter.addMany(n,e)}},{key:"addOne",value:function(e,t){var n=this.guard.mustBeEntity(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackAddOne(n,e,a),this.adapter.addOne(n,e)}},{key:"removeMany",value:function(e,t){var n=this.guard.mustBeKeys(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackDeleteMany(n,e,a),this.adapter.removeMany(n,e)}},{key:"removeOne",value:function(e,t){var n=this.guard.mustBeKey(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackDeleteOne(n,e,a),this.adapter.removeOne(n,e)}},{key:"removeAll",value:function(e,t){return Object.assign(Object.assign({},this.adapter.removeAll(e)),{loaded:!1,loading:!1,changeState:{}})}},{key:"updateMany",value:function(e,t){var n=this.guard.mustBeUpdates(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpdateMany(n,e,a),this.adapter.updateMany(n,e)}},{key:"updateOne",value:function(e,t){var n=this.guard.mustBeUpdate(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpdateOne(n,e,a),this.adapter.updateOne(n,e)}},{key:"upsertMany",value:function(e,t){var n=this.guard.mustBeEntities(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpsertMany(n,e,a),this.adapter.upsertMany(n,e)}},{key:"upsertOne",value:function(e,t){var n=this.guard.mustBeEntity(t),a=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpsertOne(n,e,a),this.adapter.upsertOne(n,e)}},{key:"commitAll",value:function(e){return this.entityChangeTracker.commitAll(e)}},{key:"commitMany",value:function(e,t){return this.entityChangeTracker.commitMany(this.extractData(t),e)}},{key:"commitOne",value:function(e,t){return this.entityChangeTracker.commitOne(this.extractData(t),e)}},{key:"undoAll",value:function(e){return this.entityChangeTracker.undoAll(e)}},{key:"undoMany",value:function(e,t){return this.entityChangeTracker.undoMany(this.extractData(t),e)}},{key:"undoOne",value:function(e,t){return this.entityChangeTracker.undoOne(this.extractData(t),e)}},{key:"setChangeState",value:function(e,t){var n=this.extractData(t);return e.changeState===n?e:Object.assign(Object.assign({},e),{changeState:n})}},{key:"setCollection",value:function(e,t){var n=this.extractData(t);return e===n?e:n}},{key:"setFilter",value:function(e,t){var n=this.extractData(t);return e.filter===n?e:Object.assign(Object.assign({},e),{filter:n})}},{key:"setLoaded",value:function(e,t){var n=!0===this.extractData(t)||!1;return e.loaded===n?e:Object.assign(Object.assign({},e),{loaded:n})}},{key:"setLoading",value:function(e,t){return this.setLoadingFlag(e,this.extractData(t))}},{key:"setLoadingFalse",value:function(e){return this.setLoadingFlag(e,!1)}},{key:"setLoadingTrue",value:function(e){return this.setLoadingFlag(e,!0)}},{key:"setLoadingFlag",value:function(e,t){return e.loading===(t=!0===t)?e:Object.assign(Object.assign({},e),{loading:t})}},{key:"extractData",value:function(e){return e.payload&&e.payload.data}},{key:"extractMergeStrategy",value:function(e){return this.isChangeTracking?e.payload&&e.payload.mergeStrategy:N.IgnoreChanges}},{key:"isOptimistic",value:function(e){return e.payload&&!0===e.payload.isOptimistic}}]),e}(),ut=((Pe=function(){function e(t){_classCallCheck(this,e),this.entityDefinitionService=t}return _createClass(e,[{key:"create",value:function(e){var t=this.entityDefinitionService.getDefinition(e);return new ot(e,t).methods}}]),e}()).\u0275fac=function(e){return new(e||Pe)(a.gc(he))},Pe.\u0275prov=a.Ob({token:Pe,factory:Pe.\u0275fac}),Pe),lt=((qe=function(){function e(t){_classCallCheck(this,e),this.methodsFactory=t}return _createClass(e,[{key:"create",value:function(e){var t=this.methodsFactory.create(e);return function(e,n){var a=t[n.payload.entityOp];return a?a(e,n):e}}}]),e}()).\u0275fac=function(e){return new(e||qe)(a.gc(ut))},qe.\u0275prov=a.Ob({token:qe,factory:qe.\u0275fac}),qe),ht=((Be=function(){function e(t,n){_classCallCheck(this,e),this.entityCollectionReducerFactory=t,this.entityCollectionReducers={},this.entityCollectionMetaReducer=k.o.apply(null,n||[])}return _createClass(e,[{key:"getOrCreateReducer",value:function(e){var t=this.entityCollectionReducers[e];return t||(t=this.entityCollectionReducerFactory.create(e),t=this.registerReducer(e,t),this.entityCollectionReducers[e]=t),t}},{key:"registerReducer",value:function(e,t){return t=this.entityCollectionMetaReducer(t),this.entityCollectionReducers[e.trim()]=t}},{key:"registerReducers",value:function(e){var t=this;(e?Object.keys(e):[]).forEach((function(n){return t.registerReducer(n,e[n])}))}}]),e}()).\u0275fac=function(e){return new(e||Be)(a.gc(lt),a.gc(Se,8))},Be.\u0275prov=a.Ob({token:Be,factory:Be.\u0275fac}),Be),dt=((Le=function(){function e(t,n,a){_classCallCheck(this,e),this.entityCollectionCreator=t,this.entityCollectionReducerRegistry=n,this.logger=a}return _createClass(e,[{key:"create",value:function(){return(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@ngrx/data/entity-cache/clear-collections":return this.clearCollectionsReducer(e,t);case"@ngrx/data/entity-cache/load-collections":return this.loadCollectionsReducer(e,t);case"@ngrx/data/entity-cache/merge-query-set":return this.mergeQuerySetReducer(e,t);case"@ngrx/data/entity-cache/save-entities":return this.saveEntitiesReducer(e,t);case"@ngrx/data/entity-cache/save-entities-cancel":return this.saveEntitiesCancelReducer(e,t);case"@ngrx/data/entity-cache/save-entities-error":return this.saveEntitiesErrorReducer(e,t);case"@ngrx/data/entity-cache/save-entities-success":return this.saveEntitiesSuccessReducer(e,t);case"@ngrx/data/entity-cache/set-cache":return t.payload.cache}var n=t.payload;return n&&n.entityName&&n.entityOp&&!n.error?this.applyCollectionReducer(e,t):e}).bind(this)}},{key:"clearCollectionsReducer",value:function(e,t){var n=this,a=t.payload.collections;return a||(a=Object.keys(e)),a.reduce((function(e,a){return n.applyCollectionReducer(e,{type:"[".concat(a,"] ").concat(t.type),payload:{entityName:a,entityOp:"@ngrx/data/remove-all"}})}),e)}},{key:"loadCollectionsReducer",value:function(e,t){var n=this,a=t.payload.collections;return Object.keys(a).reduce((function(e,r){return n.applyCollectionReducer(e,{type:"[".concat(r,"] ").concat(t.type),payload:{entityName:r,entityOp:"@ngrx/data/add-all",data:a[r]}})}),e)}},{key:"mergeQuerySetReducer",value:function(e,t){var n=this,a=t.payload,r=a.mergeStrategy,i=a.querySet;return r=null===r?N.PreserveChanges:r,Object.keys(i).reduce((function(e,a){return n.applyCollectionReducer(e,{type:"[".concat(a,"] ").concat(t.type),payload:{entityName:a,entityOp:"@ngrx/data/upsert-many",data:i[a],mergeStrategy:r}})}),e)}},{key:"saveEntitiesReducer",value:function(e,t){var n=this,a=t.payload,r=a.changeSet,i=a.correlationId,s=a.isOptimistic,c=a.mergeStrategy,o=a.tag;try{r.changes.forEach((function(a){var r=a.entityName,l={entityName:r,entityOp:u(a),data:a.entities,correlationId:i,isOptimistic:s,mergeStrategy:c,tag:o},h={type:"[".concat(r,"] ").concat(t.type),payload:l};if(e=n.applyCollectionReducer(e,h),h.payload.error)throw h.payload.error}))}catch(l){t.payload.error=l}return e;function u(e){switch(e.op){case"Add":return"@ngrx/data/save/add-many";case"Delete":return"@ngrx/data/save/delete-many";case"Update":return"@ngrx/data/save/update-many";case"Upsert":return"@ngrx/data/save/upsert-many"}}}},{key:"saveEntitiesCancelReducer",value:function(e,t){return this.clearLoadingFlags(e,t.payload.entityNames||[])}},{key:"saveEntitiesErrorReducer",value:function(e,t){var n=t.payload.originalAction.payload.changeSet.changes.map((function(e){return e.entityName}));return this.clearLoadingFlags(e,n)}},{key:"saveEntitiesSuccessReducer",value:function(e,t){var n=this,a=t.payload,r=a.changeSet,i=a.correlationId,s=a.isOptimistic,c=a.mergeStrategy,o=a.tag;return r.changes.forEach((function(a){var r=a.entityName,l={entityName:r,entityOp:u(a),data:a.entities,correlationId:i,isOptimistic:s,mergeStrategy:c,tag:o};e=n.applyCollectionReducer(e,{type:"[".concat(r,"] ").concat(t.type),payload:l})})),e;function u(e){switch(e.op){case"Add":return"@ngrx/data/save/add-many/success";case"Delete":return"@ngrx/data/save/delete-many/success";case"Update":return"@ngrx/data/save/update-many/success";case"Upsert":return"@ngrx/data/save/upsert-many/success"}}}},{key:"applyCollectionReducer",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a=n.payload.entityName,r=t[a],i=this.entityCollectionReducerRegistry.getOrCreateReducer(a);try{e=i(r||this.entityCollectionCreator.create(a),n)}catch(s){this.logger.error(s),n.payload.error=s}return n.payload.error||r===e?t:Object.assign(Object.assign({},t),_defineProperty({},a,e))}},{key:"clearLoadingFlags",value:function(e,t){var n=!1;return t.forEach((function(t){var a=e[t];a.loading&&(n||(e=Object.assign({},e),n=!0),e[t]=Object.assign(Object.assign({},a),{loading:!1}))})),e}}]),e}()).\u0275fac=function(e){return new(e||Le)(a.gc(Ze),a.gc(ht),a.gc(ae))},Le.\u0275prov=a.Ob({token:Le,factory:Le.\u0275fac}),Le),yt=((Fe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"error",value:function(e,t){e&&(t?console.error(e,t):console.error(e))}},{key:"log",value:function(e,t){e&&(t?console.log(e,t):console.log(e))}},{key:"warn",value:function(e,t){e&&(t?console.warn(e,t):console.warn(e))}}]),e}()).\u0275fac=function(e){return new(e||Fe)},Fe.\u0275prov=a.Ob({token:Fe,factory:Fe.\u0275fac}),Fe),ft=["equipment","information","money","series"],gt=((Qe=function(){function e(t){var n=this;_classCallCheck(this,e),this.pluralNames={},t&&t.forEach((function(e){return n.registerPluralNames(e)}))}return _createClass(e,[{key:"pluralize",value:function(e){return this.pluralNames[e]||(ft.indexOf(e.toLowerCase())>=0?e:/[aeiou]y$/.test(e)?e+"s":e.endsWith("y")?e.substr(0,e.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(e)?e+"es":e+"s")}},{key:"registerPluralNames",value:function(e){this.pluralNames=Object.assign(Object.assign({},this.pluralNames),e||{})}}]),e}()).\u0275fac=function(e){return new(e||Qe)(a.gc(re,8))},Qe.\u0275prov=a.Ob({token:Qe,factory:Qe.\u0275fac}),Qe),pt=((He=function(){function e(t,n,r,i,s,c){_classCallCheck(this,e),this.reducerManager=t,this.injector=r,this.entityCacheName=i,this.initialState=s,this.metaReducers=c;var o=i||"entityCache";s="function"==typeof s?s():s;var u=(c||[]).map((function(e){return e instanceof a.r?r.get(e):e}));this.entityCacheFeature={key:o,reducers:n.create(),reducerFactory:k.n,initialState:s||{},metaReducers:u},t.addFeature(this.entityCacheFeature)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.reducerManager.removeFeature(this.entityCacheFeature)}}],[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:Ce,useValue:t.entityCacheMetaReducers?t.entityCacheMetaReducers:[]},{provide:Se,useValue:t.entityCollectionMetaReducers?t.entityCollectionMetaReducers:[]},{provide:re,multi:!0,useValue:t.pluralNames?t.pluralNames:{}}]}}}]),e}()).\u0275mod=a.Qb({type:He}),He.\u0275inj=a.Pb({factory:function(e){return new(e||He)(a.gc(k.d),a.gc(dt),a.gc(a.s),a.gc(be,8),a.gc(je,8),a.gc(Ce,8))},providers:[pe,ve,A,me,dt,xe,Ze,lt,ut,ht,tt,nt,he,Ge,Ye,et,at,{provide:be,useValue:"entityCache"},{provide:it,useClass:rt},{provide:ae,useClass:yt}],imports:[[k.k]]}),He),vt=((Ke=function(){function e(t,n,a){_classCallCheck(this,e),this.effectSources=t,this.addEffects(n),this.addEffects(a)}return _createClass(e,[{key:"addEffects",value:function(e){this.effectSources.addEffects(e)}}],[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:le,multi:!0,useValue:t.entityMetadata?t.entityMetadata:[]},{provide:Ce,useValue:t.entityCacheMetaReducers?t.entityCacheMetaReducers:[]},{provide:Se,useValue:t.entityCollectionMetaReducers?t.entityCollectionMetaReducers:[]},{provide:re,multi:!0,useValue:t.pluralNames?t.pluralNames:{}}]}}}]),e}()).\u0275mod=a.Qb({type:Ke}),Ke.\u0275inj=a.Pb({factory:function(e){return new(e||Ke)(a.gc(x.b),a.gc(We),a.gc(Xe))},providers:[ue,de,ye,We,Xe,{provide:se,useClass:ce},{provide:fe,useClass:ge},{provide:ie,useClass:gt}],imports:[[pt,x.c]]}),Ke)},MQ3N:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a,r,i,s=n("ofXK"),c=n("aceb"),o=n("9urI"),u=n("3Pt+"),l=n("G5s2"),h=n("74Do"),d=n("fXoL"),y=((a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this,e)).customPluralizer=e,a}return _createClass(n,[{key:"getResourceUrls",value:function(e,t){var n=this.knownHttpResourceUrls[e];if(!n){var a="/".concat(this.customPluralizer.pluralize(e),"/").toLowerCase();n={entityResourceUrl:a,collectionResourceUrl:a},this.registerHttpResourceUrls(_defineProperty({},e,n))}return n}}]),n}(l.a)).\u0275fac=function(e){return new(e||a)(d.gc(l.f))},a.\u0275prov=d.Ob({token:a,factory:a.\u0275fac}),a),f=n("xbZg"),g=n("m1XX"),p=n("8ikL"),v=((r=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"DeliveryMan",e)}return n}(l.b)).\u0275fac=function(e){return new(e||r)(d.gc(l.c))},r.\u0275prov=d.Ob({token:r,factory:r.\u0275fac,providedIn:"root"}),r),O={entityMetadata:{Order:{},Company:{},DeliveryMan:{}},pluralNames:{Order:"Orders",Company:"Companies",DeliveryMan:"DeliveryMen"}},m=((i=function e(){_classCallCheck(this,e)}).\u0275mod=d.Qb({type:i}),i.\u0275inj=d.Pb({factory:function(e){return new(e||i)},providers:[h.a,p.a,v,{provide:l.e,useClass:y},f.a],imports:[[s.c,c.u,c.n,c.l,o.a,c.E,u.A,c.X,c.j,l.d.forRoot(O),g.b]]}),i)},xbZg:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a,r=n("Oh6O"),i=n("fXoL"),s=n("sYmb"),c=((a=function(){function e(t){_classCallCheck(this,e),this.translate=t,this.status={inProgress:{label:"En cours",color:"warning"},created:{label:"Cr\xe9\xe9e",color:"primary"},shipping:{label:"En livraison",color:"info"},delivered:{label:"Livr\xe9e",color:"success"},canceled:{label:"Annul\xe9e",color:"danger"}},this.communSettings={mode:"external",attr:{class:"orders-table"}}}return _createClass(e,[{key:"mapApiData",value:function(e){var t=this,n=new r.f;return e.map((function(e){return{id:e.id,fullName:e.customer.firstName+" "+e.customer.lastName,phoneNumber:e.customer.phoneNumber,city:e.customer.address.city,price:n.transform(e.totalCost),status:t.getStatusHTML(e.status)}}))}},{key:"getSellerSettings",value:function(e){return Object.assign(Object.assign({actions:{position:"right",custom:[{name:"previewAction",title:'<i class="eva eva-eye-outline text-black-50"></i>'},{name:"editAction",title:'<i class="eva eva-edit-outline text-info"></i>'},{name:"deleteAction",title:'<i class="eva eva-trash-2-outline text-danger"></i>'}],add:!1,edit:!1,delete:!1}},this.communSettings),{columns:e})}},{key:"getStatusHTML",value:function(e){return'<span class="status-tag status-tag-inline status-tag-pill status-tag-light-'.concat(this.status[e].color,'">').concat(this.translate.instant(e)," </span>")}},{key:"statusFilterList",get:function(){var e=this;return Object.keys(this.status).map((function(t){return{value:e.status[t].label,title:e.status[t].label}}))}}]),e}()).\u0275fac=function(e){return new(e||a)(i.gc(s.d))},a.\u0275prov=i.Ob({token:a,factory:a.\u0275fac}),a)}}]);